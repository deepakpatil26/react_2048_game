(this.webpackJsonpreact_2048_game=this.webpackJsonpreact_2048_game||[]).push([[0],[,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),o=n.n(s),i=n(3),r=n.n(i);n(8);const c=[0,1,2,3],a=(e,t)=>{var n,s;return null===e&&null===t||(e&&(null===(n=Object.keys(e))||void 0===n?void 0:n.length))===(t&&(null===(s=Object.keys(t))||void 0===s?void 0:s.length))&&Object.keys(e).every((n=>e[n]===t[n]))},l=(e,t)=>u(e,(e=>e.positionY),((e,t)=>e.positionY=t),t),d=(e,t)=>u(e,(e=>e.positionX),((e,t)=>e.positionX=t),t),u=(e,t,n,s)=>{if(0===e.length)return[];let o=JSON.parse(JSON.stringify(e));o.sort(((e,n)=>t(e)-t(n)));const i="left"===s?0:4-o.length;for(let c=0;c<o.length;c++)n(o[c],i+c);"left"===s&&o.reverse();let r=o.length-1;for(;r>=1;)if(o[r].value!==o[r-1].value||2048===o[r].value)r--;else{for(let e=0;e<=r-1;e++){const i="right"===s?1:-1;n(o[e],t(o[e])+i)}r-=2}return o},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[];for(;e>0;)t=[...t,h(t)],e--;return t},h=e=>{const t=e=>[Math.floor(e/4),e%4];Math.floor(16*Math.random());let n=Math.floor(16*Math.random()),s=t(n);for(;j(e,...s);)n=15===n?0:n+1,s=t(n);const o=Math.random()<=.2?4:2;return{id:v(e),value:o,type:"new",positionX:s[0],positionY:s[1]}},j=(e,t,n)=>e.some((e=>e.positionX===t&&e.positionY===n)),p=(e,t)=>e.filter((e=>e.positionX===t)),b=(e,t)=>e.filter((e=>e.positionY===t)),v=e=>g(e)+1,g=e=>Math.max.apply(Math,[0,...e.map((e=>e.id))]),f={up:e=>c.map((t=>d(b(e,t),"left"))).flat(),down:e=>c.map((t=>d(b(e,t),"right"))).flat(),right:e=>c.map((t=>l(p(e,t),"right"))).flat(),left:e=>c.map((t=>l(p(e,t),"left"))).flat()},O=420,x=520,y=73,w=97,k=121,E={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left",w:"up",s:"down",d:"right",a:"left"};n(9);var N=n(0);var S=Object(s.memo)((e=>Object(N.jsx)("div",{className:`tile tile-${e.value}`,style:{transform:`translate(${e.x}px, ${e.y}px)`},children:Object(N.jsx)("div",{className:`tileInner ${e.type}`,children:e.value})})));n(11);const M=e=>Object(N.jsx)("div",{children:e.tiles.map((t=>Object(N.jsx)(S,{value:t.value,type:t.type,x:t.positionY*e.factor,y:t.positionX*e.factor},t.id)))}),C=e=>{const[t,n]=Object(s.useState)(A());Object(s.useEffect)((()=>{const e=()=>{n(A())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const o=e.tiles.sort(((e,t)=>e.id-t.id));return Object(N.jsx)("div",{className:"tileContainer",children:Object(N.jsx)(M,{tiles:o,factor:t})})},A=()=>window.innerWidth<=O?y:window.innerWidth<=x?w:k;n(12);const R=e=>{const{id:t,children:n,className:s,onClick:o}=e;return Object(N.jsx)("button",{id:t,className:`appButton ${s||""}`,onClick:o,children:n})},_={WIN:{message:"Congratulations! You Win!",buttonText:"Play again",containerClass:"gameResultWin"},GAME_OVER:{message:"Game Over!",buttonText:"Try again",containerClass:"gameResultLose"}},I=e=>{const{isWin:t,onContinue:n,onRestart:s,playAfterWin:o}=e,{message:i,buttonText:r,containerClass:c}=t||o?_.WIN:_.GAME_OVER;return Object(N.jsxs)("div",{className:`gameResult ${c}`,children:[Object(N.jsx)("p",{children:i}),Object(N.jsxs)("div",{children:[t&&Object(N.jsx)(R,{className:"continueButton",onClick:()=>n(),children:"Continue"}),Object(N.jsx)(R,{onClick:()=>s(),children:r})]})]})};var P=e=>{const{gameState:t,dispatch:n}=ue(),{status:s}=t,o=e.tiles.some((e=>2048===e.value));return Object(N.jsx)(N.Fragment,{children:"IN_PROGRESS"!==s&&"PLAY_AFTER_WIN"!==s&&Object(N.jsx)(I,{isWin:"WIN"===s,playAfterWin:o,onRestart:()=>{n({type:"restart"})},onContinue:()=>{n({type:"continue"})},status:s})})};const T=()=>{const e=Array.from(Array(4).keys()).map((e=>{const t=Array.from(Array(4).keys()).map((e=>Object(N.jsx)("div",{className:"cell"},e)));return Object(N.jsx)("div",{className:"row",children:t},e)}));return Object(N.jsx)("div",{className:"gridContainer",children:e})};var L=e=>Object(N.jsxs)("div",{id:"boardContainer",children:[Object(N.jsx)(P,{tiles:e.tiles}),Object(N.jsx)(T,{}),Object(N.jsx)(C,{tiles:e.tiles})]});n(13);const W=()=>{const{gameState:e}=ue(),[t,n]=Object(s.useReducer)(Y,$());return Object(s.useEffect)((()=>{n({type:"addMove",payload:e})}),[e]),Object(s.useEffect)((()=>{t.moves.length<2||t.loading||(n({type:"startMove"}),setTimeout((()=>{n({type:"endMove"})}),100))}),[t]),Object(N.jsx)(L,{tiles:t.tiles})};function Y(e,t){switch(t.type){case"addMove":return!t.payload.lastMove||0===e.tiles.length?$(t.payload):{...e,moves:[...e.moves,t.payload]};case"startMove":{const t=e.moves[0],n=e.moves[1],s=f[n.lastMove](t.tiles);return{...e,loading:!0,tiles:s}}case"endMove":{const t=e.moves[1];return{moves:e.moves.slice(1),loading:!1,tiles:t.tiles}}default:throw new Error(`Unhandled action: ${t}`)}}const $=e=>e?{moves:[e],loading:!1,tiles:e.tiles}:{moves:[],loading:!1,tiles:[]};let G=null,z=null;const X=()=>{const{dispatch:e}=ue();return Object(s.useEffect)((()=>{function t(e){if(1===e.touches.length){const t=e.touches[0];G=t.clientX,z=t.clientY}}function n(t){if(!G||!z||t.touches.length>0)return;const n=t.changedTouches[0];var s=n.clientX,o=n.clientY,i=G-s,r=z-o;Math.abs(i)>Math.abs(r)?e(i<0?{type:"move",payload:"right"}:{type:"move",payload:"left"}):e(r<0?{type:"move",payload:"down"}:{type:"move",payload:"up"}),G=null,z=null}const s=document.getElementById("boardContainer");return s.addEventListener("touchstart",t),s.addEventListener("touchend",n),()=>{s.removeEventListener("touchstart",t),s.removeEventListener("touchend",n)}}),[e]),Object(N.jsx)(W,{})};n(14);const B="2048game",F=(e,t)=>"function"===typeof t?t(e):t;var J=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;const[o,i]=Object(s.useReducer)(n,((e,t)=>{try{const n=JSON.parse(window.localStorage.getItem(B)),s=null===n||void 0===n?void 0:n[e];return null!==s&&void 0!==s?s:t}catch(n){return console.log(n),t}})(e,t));return Object(s.useEffect)((()=>{let t=JSON.parse(window.localStorage.getItem(B))||{};t[e]=o,window.localStorage.setItem(B,JSON.stringify(t))}),[o,e]),[o,i]};n(15);const D=e=>Object(N.jsxs)("div",{className:"scoreBox",children:[Object(N.jsx)("span",{className:"title",children:e.title}),Object(N.jsx)("span",{className:"score",children:e.score})]});n(16);const q=()=>{const{gameState:e}=ue(),[t,n]=J("scores",U(),H);return Object(s.useEffect)((()=>{n({type:"change",payload:e.tiles})}),[e.tiles,n]),Object(s.useEffect)((()=>{if(t.newPoints>0){const e=document.getElementById("additionScore");e.innerText=`+${t.newPoints}`;const n=e.cloneNode(!0);e.parentNode.replaceChild(n,e)}}),[t]),Object(N.jsxs)("div",{className:"scoresContainer",children:[Object(N.jsxs)("div",{style:{position:"relative"},children:[Object(N.jsx)(D,{title:"SCORE",score:t.score}),Object(N.jsx)("div",{className:"addScore",id:"additionScore"})]}),Object(N.jsx)(D,{title:"BEST",score:t.bestScore})]})},U=function(){return{score:0,newPoints:0,bestScore:0,tiles:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},V=(e,t)=>e.some((e=>e.id===t.id)),H=(e,t)=>{if("change"===t.type){const n=t.payload;if(e.tiles.length===n.length&&e.tiles.every((e=>V(n,e))))return e;if(2===n.length&&[1,2].every((e=>n.find((t=>t.id===e))))&&!e.tiles.every((e=>V(n,e))))return{...U(n),bestScore:e.bestScore};if(e.tiles.every((e=>V(n,e)))&&n.length===e.tiles.length+1)return{...e,tiles:n,newPoints:0};const s=g(n),o=n.reduce(((t,n)=>t+(n.id===s||V(e.tiles,n)?0:n.value)),0),i=e.score+o,r=Math.max(i,e.bestScore);return{tiles:n,newPoints:o,score:i,bestScore:r}}throw new Error(`Unhandled action type: ${t.type}`)};n(17);const K=()=>Object(N.jsx)("span",{className:"gameTitle",children:"2048"}),Q=()=>Object(N.jsxs)("div",{children:[Object(N.jsxs)("span",{children:["Join the numbers to get ",Object(N.jsx)("b",{children:"2048"}),"!"]}),Object(N.jsx)("br",{}),Object(N.jsx)("a",{href:"#howToPlaySection",children:"How to play \u2192"})]}),Z=()=>{const{dispatch:e}=ue();return Object(N.jsxs)("div",{className:"header",children:[Object(N.jsxs)("div",{className:"gameIntro",children:[Object(N.jsx)(K,{}),Object(N.jsx)(Q,{})]}),Object(N.jsxs)("div",{className:"actions",children:[Object(N.jsx)(q,{}),Object(N.jsx)(R,{id:"restartGameBtn",onClick:t=>e({type:"restart"}),children:"New Game"})]})]})},ee={mobileDevice:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,mobileDeviceExtend:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i},te=e=>Object(N.jsxs)("div",{id:e.id,children:[Object(N.jsx)("h4",{children:e.title}),e.children,e.bottomSeparator?Object(N.jsx)("hr",{}):null]}),ne=()=>{const e=(t=navigator.userAgent||navigator.vendor,ee.mobileDevice.test(t)||ee.mobileDeviceExtend.test(t.substring(0,4))?"Swipe with your fingers to move the numbers.":"Use your arrow keys to move the numbers.");var t;return Object(N.jsx)(te,{id:"howToPlaySection",title:"HOW TO PLAY",bottomSeparator:!0,children:Object(N.jsxs)("p",{children:[e," The same numbers will be merged into one when they touch. After each move, a new number (",Object(N.jsx)("strong",{children:"2"})," or ",Object(N.jsx)("strong",{children:"4"}),") is generated at a random empty position. Merge the numbers and build a 2048 number to ",Object(N.jsx)("strong",{children:"WIN"})," the game!"]})})},se=()=>Object(N.jsx)(te,{title:"LEARN MORE",children:Object(N.jsxs)("p",{children:["This app is inspired by"," ",Object(N.jsx)("a",{href:"https://play2048.co/",children:"https://play2048.co/"}),". If you want to learn more about the project tech stack or see the code, visit the\xa0",Object(N.jsx)("a",{href:"https://github.com/deepakpatil26/react_2048_game",target:"_blank",rel:"noreferrer",children:"Github repository"}),"."]})}),oe=()=>Object(N.jsxs)("div",{children:[Object(N.jsx)(ne,{}),Object(N.jsx)(se,{})]}),ie=o.a.createContext(null),re=e=>(e=>{if(e.length<16||(e=>{const t={};for(let n=0;n<e.length;n++){const s=`${e[n].positionX}${e[n].positionY}`;if(t[s])return!0;t[s]=!0}return!1})(e))return!1;const t=(e,t,n)=>e.some((e=>t.some((t=>n(e)===n(t)&&e.value===t.value))));for(let n=0;n<3;n++)if(t(p(e,n),p(e,n+1),(e=>e.positionY))||t(b(e,n),b(e,n+1),(e=>e.positionX)))return!1;return!0})(e)?"GAME_OVER":(e=>e.some((e=>2048===e.value)))(e)?"WIN":"IN_PROGRESS",ce=function(){return{tiles:m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:2),lastMove:null,status:"IN_PROGRESS"}};function ae(e,t){switch(t.type){case"restart":return ce();case"continue":return{...e,status:"PLAY_AFTER_WIN"};case"move":{let o=(0,f[t.payload])(e.tiles);if(n=e.tiles,s=o,n.every((e=>s.some((t=>a(e,t))))))return e;o=(e=>{let t=v(e),n={};return e.forEach((e=>{const s=`${e.positionX}${e.positionY}`;if(n[s]){const o=2*e.value;n[s]={...e,id:t++,value:o,type:"merged"}}else n[s]=e})),Object.values(n)})(o),o=[...o,h(o)];const i=re(o),r="PLAY_AFTER_WIN"!==e.status||"GAME_OVER"===i;return{tiles:o,lastMove:t.payload,status:r?i:e.status}}default:throw new Error(`Unhandled action: ${t}`)}var n,s}const le=e=>{const[t,n]=J("game",ce(),ae);return Object(s.useEffect)((()=>{const e=e=>{e.preventDefault();const t=E[e.key];t&&n({type:"move",payload:t})};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n]),Object(N.jsx)(ie.Provider,{value:{gameState:t,dispatch:n},children:e.children})},de=()=>Object(N.jsx)(le,{children:Object(N.jsxs)("div",{className:"container",children:[Object(N.jsxs)("div",{className:"gameContainer",children:[Object(N.jsx)(Z,{}),Object(N.jsx)(X,{})]}),Object(N.jsx)(oe,{})]})});function ue(){const e=Object(s.useContext)(ie);if(void 0===e)throw new Error("useGameContext must be used within a GameContextProvider");return e}var me=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("main",{children:Object(N.jsx)(de,{})})})};var he=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((t=>{let{getCLS:n,getFID:s,getFCP:o,getLCP:i,getTTFB:r}=t;n(e),s(e),o(e),i(e),r(e)}))};r.a.render(Object(N.jsx)(o.a.StrictMode,{children:Object(N.jsx)(me,{})}),document.getElementById("root")),he()}],[[18,1,2]]]);
//# sourceMappingURL=main.f087966a.chunk.js.map